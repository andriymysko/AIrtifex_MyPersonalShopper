<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Personal Shopper | Estilisme Intel·ligent</title>
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    
    <style>
        :root {
            --color-bg: #ffffff;
            --color-text: #1a1a1a;
            --accent: #D4AF37; /* Daurat */
            --accent-hover: #b5952f;
            --font-title: 'Playfair Display', serif;
            --font-body: 'Lato', sans-serif;
        }

        /* --- MILLORA 1: SCROLL SUAU --- */
        html { scroll-behavior: smooth; }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: var(--font-body); color: var(--color-text); overflow-x: hidden; }

        /* --- NAVBAR --- */
        nav {
            display: flex; justify-content: space-between; align-items: center;
            padding: 15px 5%; position: fixed; width: 100%; top: 0;
            background: rgba(255,255,255,0.98); backdrop-filter: blur(5px);
            z-index: 1000; border-bottom: 1px solid #f0f0f0; box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        .logo { font-family: var(--font-title); font-size: 1.4rem; font-weight: 700; letter-spacing: 1px; color: #000; }
        .nav-links { display: flex; align-items: center; }
        .nav-links a { margin-left: 25px; text-decoration: none; color: #555; font-weight: 500; font-size: 0.9rem; transition: 0.3s; }
        .nav-links a:hover { color: var(--accent); }
        
        /* --- MILLORA 3: BOTÓ PREMIUM --- */
        .btn-primary { 
            background: var(--accent); 
            color: #fff !important; 
            padding: 10px 25px; 
            border-radius: 4px; /* Una mica arrodonit */
            font-weight: bold;
            letter-spacing: 1px;
            box-shadow: 0 4px 10px rgba(212, 175, 55, 0.3);
        }
        .btn-primary:hover { 
            background: #000; 
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(0,0,0,0.2);
        }

        /* --- HERO SECTION --- */
        .hero {
            height: 100vh;
            background-image: linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.5)), url('https://images.unsplash.com/photo-1483985988355-763728e1935b?ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80');
            background-size: cover; background-position: center;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            text-align: center; color: #fff; padding: 20px; margin-top: 60px; /* Compensar navbar */
        }
        .hero h1 { font-family: var(--font-title); font-size: 3.5rem; margin-bottom: 20px; animation: fadeInUp 1s ease; text-shadow: 0 2px 10px rgba(0,0,0,0.3); }
        .hero p { font-size: 1.2rem; max-width: 600px; margin-bottom: 40px; animation: fadeInUp 1.2s ease; text-shadow: 0 1px 5px rgba(0,0,0,0.3); }
        
        .hero-btn {
            background: #fff; color: #000; padding: 18px 45px; text-decoration: none;
            font-weight: bold; text-transform: uppercase; letter-spacing: 2px;
            transition: 0.3s; animation: fadeInUp 1.4s ease; border-radius: 4px;
        }
        .hero-btn:hover { background: var(--accent); color: #fff; transform: scale(1.05); }

        /* --- SECCIONS GENERALS --- */
        .section-padding { padding: 80px 10%; }
        .section-title { font-family: var(--font-title); font-size: 2.5rem; margin-bottom: 50px; text-align: center; position: relative; }
        .section-title::after { content: ''; display: block; width: 60px; height: 3px; background: var(--accent); margin: 15px auto 0; }

        /* --- COM FUNCIONA --- */
        .steps-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 40px; text-align: center; }
        .step-card { padding: 30px; background: #fff; border-radius: 8px; transition: 0.3s; border: 1px solid transparent; }
        .step-card:hover { border-color: #eee; box-shadow: 0 10px 30px rgba(0,0,0,0.05); transform: translateY(-5px); }
        .step-icon { font-size: 3rem; color: var(--accent); margin-bottom: 20px; }
        .step-card h3 { margin-bottom: 15px; font-family: var(--font-title); }
        .step-card p { color: #666; line-height: 1.6; }

        /* --- PROMO --- */
        .promo-section { display: flex; flex-wrap: wrap; background: #f9f9f9; }
        .promo-img { flex: 1; min-width: 300px; min-height: 450px; background: url('https://images.unsplash.com/photo-1441984904996-e0b6ba687e04?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80') center/cover; }
        .promo-text { flex: 1; padding: 80px; display: flex; flex-direction: column; justify-content: center; }
        .promo-tag { color: var(--accent); font-weight: bold; text-transform: uppercase; letter-spacing: 2px; margin-bottom: 10px; font-size: 0.9rem; }

        /* --- FAQ (NOVA SECCIÓ) --- */
        .faq-container { max-width: 800px; margin: 0 auto; }
        .faq-item { border-bottom: 1px solid #ddd; margin-bottom: 10px; }
        .faq-question {
            width: 100%; text-align: left; background: none; border: none;
            padding: 20px; font-size: 1.1rem; font-weight: bold; cursor: pointer;
            display: flex; justify-content: space-between; align-items: center;
            font-family: var(--font-body); transition: 0.3s;
        }
        .faq-question:hover { color: var(--accent); }
        .faq-answer {
            max-height: 0; overflow: hidden; transition: max-height 0.3s ease-out;
            padding: 0 20px; color: #666; line-height: 1.6;
        }
        .faq-item.active .faq-answer { padding-bottom: 20px; max-height: 200px; }
        .faq-item.active .material-icons { transform: rotate(180deg); }

        /* --- FOOTER (MILLORAT) --- */
        footer { background: #111; color: #fff; padding: 60px 10%; font-size: 0.9rem; }
        .footer-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 40px; margin-bottom: 40px; }
        .footer-col h4 { color: var(--accent); margin-bottom: 20px; font-family: var(--font-title); letter-spacing: 1px; }
        .footer-col ul { list-style: none; }
        .footer-col li { margin-bottom: 10px; }
        .footer-col a { color: #bbb; text-decoration: none; transition: 0.2s; }
        .footer-col a:hover { color: #fff; }
        .footer-bottom { border-top: 1px solid #333; padding-top: 20px; text-align: center; color: #666; }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @media (max-width: 768px) {
            .hero h1 { font-size: 2.5rem; }
            .nav-links a:not(.btn-primary) { display: none; } /* Amagar links menys el botó en mòbil */
            .promo-text { padding: 40px; }
        }

        .chat-body { 
    flex-grow: 1; padding: 20px; overflow-y: auto; background: #000; 
    display: flex; flex-direction: column; gap: 12px; 
}
.chat-msg { 
    padding: 10px 15px; border-radius: 15px; font-size: 0.9rem; 
    max-width: 80%; line-height: 1.4; word-wrap: break-word; font-weight: 500;
}
.chat-msg.bot { 
    background: #222; color: #fff; align-self: flex-start; 
    border-bottom-left-radius: 2px; border: 1px solid #333; 
}
.chat-msg.user { 
    background: #fff; color: #000; align-self: flex-end; 
    border-bottom-right-radius: 2px; text-align: right; 
}
    </style>
</head>
<body>

    <nav>
        <div class="logo">MY PERSONAL SHOPPER</div>
        <div class="nav-links">
            <a href="#com-funciona">Com funciona</a>
            <a href="#faq">Preguntes</a>
            <a href="login.html">Entrar</a>
            <a href="registre.html" class="btn-primary">COMENÇAR</a>
        </div>
    </nav>

    <header class="hero">
        <h1>La teva millor versió,<br>en una caixa.</h1>
        <p>Uneix estilistes experts amb tecnologia de dades. Rep 5 peces seleccionades per a tu, emprova-te-les a casa i paga només el que t'agradi.</p>
        <a href="registre.html" class="hero-btn">Crear el meu Perfil d'Estil</a>
    </header>

    <section id="com-funciona" class="section-padding">
        <h2 class="section-title">Com funciona?</h2>
        <div class="steps-grid">
            <div class="step-card">
                <span class="material-icons step-icon">assignment</span>
                <h3>1. Fes el Quiz</h3>
                <p>Respon unes preguntes ràpides sobre el teu estil, talles i pressupost. El nostre algoritme assignarà la teva estilista ideal.</p>
            </div>
            <div class="step-card">
                <span class="material-icons step-icon">local_shipping</span>
                <h3>2. Rep la Caixa</h3>
                <p>T'enviem 5 peces de roba curosament seleccionades. L'enviament és ràpid i pots seguir-lo en temps real.</p>
            </div>
            <div class="step-card">
                <span class="material-icons step-icon">checkroom</span>
                <h3>3. Decideix a Casa</h3>
                <p>Tens 15 segons (mode demo) per decidir. Paga només pel que et quedis. La devolució és gratuïta.</p>
            </div>
        </div>
    </section>

    <section class="promo-section">
        <div class="promo-img"></div>
        <div class="promo-text">
            <div class="promo-tag">GAMIFICACIÓ DE PREUS</div>
            <h2 class="section-title" style="margin-bottom: 20px; text-align: left;">Queda't-ho tot i guanya un 25%</h2>
            <p style="margin-bottom: 20px; line-height: 1.6; color: #555;">
                Volem recompensar als clients que confien en el nostre criteri. Si t'agraden les 5 peces de la caixa, t'apliquem automàticament un <strong>25% de descompte</strong> sobre el total.
            </p>
            <p style="color: #555;">
                A més, et descomptem els 10€ del servei de Personal Shopper. Moda intel·ligent al millor preu.
            </p>
            <a href="registre.html" style="margin-top: 30px; display: inline-block; color: #000; font-weight: bold; text-decoration: underline;">Vull la meva caixa →</a>
        </div>
    </section>

    <section id="faq" class="section-padding" style="background: #fff;">
        <h2 class="section-title">Preguntes Freqüents</h2>
        <div class="faq-container">
            <div class="faq-item" onclick="toggleFaq(this)">
                <button class="faq-question">Quant costa el servei? <span class="material-icons">expand_more</span></button>
                <div class="faq-answer">El servei d'estilisme té un cost de 10€, però et sortim GRATIS si et quedes almenys una peça de roba de la caixa.</div>
            </div>
            <div class="faq-item" onclick="toggleFaq(this)">
                <button class="faq-question">Quant triga a arribar la caixa? <span class="material-icons">expand_more</span></button>
                <div class="faq-answer">Un cop l'estilista tanca la teva selecció, l'enviament és urgent i arriba en 24-48 hores laborables.</div>
            </div>
            <div class="faq-item" onclick="toggleFaq(this)">
                <button class="faq-question">Com funcionen les devolucions? <span class="material-icons">expand_more</span></button>
                <div class="faq-answer">Molt fàcil. Tens una bossa prepagada dins la caixa. Posa-hi el que no vulguis i un missatger passarà a recollir-ho l'endemà.</div>
            </div>
        </div>
    </section>

    <footer>
        <div class="footer-grid">
            <div class="footer-col">
                <h4>MY PERSONAL SHOPPER</h4>
                <p style="color: #bbb; line-height: 1.6;">Revolucionant la manera de comprar moda online amb estilistes reals i intel·ligència de dades.</p>
            </div>
            <div class="footer-col">
                <h4>Empresa</h4>
                <ul>
                    <li><a href="sobre.html">Sobre Nosaltres</a></li>
                    <li><a href="#">Treballa amb nosaltres</a></li>
                    <li><a href="login-shopper.html">Accés Estilistes</a></li>
                </ul>
            </div>
            <div class="footer-col">
                <h4>Suport</h4>
                <ul>
                    <li><a href="contacte.html">Contacte</a></li>
                    <li><a href="#">Centre d'Ajuda</a></li>
                    <li><a href="#">Estat de la Comanda</a></li>
                </ul>
            </div>
            <div class="footer-col">
                <h4>Legal</h4>
                <ul>
                    <li><a href="privacitat.html">Privacitat</a></li>
                    <li><a href="#">Termes i Condicions</a></li>
                    <li><a href="#">Cookies</a></li>
                </ul>
            </div>
        </div>
        <div class="footer-bottom">
            &copy; 2025 My Personal Shopper S.L. - Barcelona. Tots els drets reservats.
        </div>
    </footer>

    <div id="chatWidget" style="position: fixed; bottom: 20px; right: 20px; z-index: 9999;">
        <button onclick="toggleChat()" style="width: 60px; height: 60px; border-radius: 50%; background: #000; color: #fff; border: none; cursor: pointer; box-shadow: 0 4px 10px rgba(0,0,0,0.2); display: flex; align-items: center; justify-content: center;">
            <span class="material-icons" style="font-size: 28px;">chat</span>
        </button>
        
        <div id="chatWindow" style="display: none; position: absolute; bottom: 80px; right: 0; width: 300px; height: 400px; background: #fff; border-radius: 10px; box-shadow: 0 5px 20px rgba(0,0,0,0.2); flex-direction: column; overflow: hidden; border: 1px solid #ddd;">
            <div style="background: #000; color: #fff; padding: 15px; font-weight: bold; display: flex; justify-content: space-between;">
                <span>Assistent Virtual</span>
                <span onclick="toggleChat()" style="cursor: pointer;">&times;</span>
            </div>
            
            <div id="chatMessages" style="flex-grow: 1; padding: 15px; overflow-y: auto; background: #f9f9f9; display: flex; flex-direction: column; gap: 10px;">
                <div class="chat-msg bot">Hola! Tens dubtes? Pregunta'm el que vulguis.</div>
            </div>
            
            <div style="padding: 10px; border-top: 1px solid #eee; display: flex;">
                <input type="text" id="chatInput" placeholder="Escriu..." style="flex-grow: 1; border: 1px solid #ddd; padding: 8px; border-radius: 4px; outline: none;" onkeypress="handleChat(event)">
                <button onclick="sendMessage()" style="background: #D4AF37; color: #fff; border: none; padding: 0 10px; margin-left: 5px; border-radius: 4px; cursor: pointer;">></button>
            </div>
        </div>
    </div>

    <script>
    // --- CONFIGURACIÓ DE LA IA ---
    
    const Part_A = 'sk-proj-tD9Bpt1o9OgsmXxh_-QRdPtP22qBeV6aw8KopFS6OyfYAPmx6KKs3KewZW-Vm5gPgpOAYMY7STT3BlbkFJJT4L_';
    const Part_B = 'wVDg20wo0TV0ArDH-cdsV1ssmS46gBam8wbi0DvmQ_9mVKNiCQhDKCADY4infx_pmDxIA';
    const API_KEY = Part_A + Part_B;

    const SYSTEM_PROMPT = `
        Ets l'Ada, una experta estilista personal de l'empresa "My Personal Shopper".
        El teu to és professional, proper, elegant i expert en moda.
        Parles sempre en Català.
        
        Dades de l'empresa:
        - El servei costa 10€, però es descompta si el client es queda roba.
        - Si es queden les 5 peces (Full Box), tenen un 25% de descompte.
        - Enviament en 24-48h.
        - Devolucions gratuïtes amb recollida a domicili.
        
        La teva feina és aconsellar sobre estils, resoldre dubtes i animar a comprar.
        Sigues breu i concisa (màxim 2 o 3 frases).
    `;

    // --- INTERFÍCIE DEL XAT ---
    function toggleChat() {
        const w = document.getElementById('chatWindow');
        w.style.display = w.style.display === 'flex' ? 'none' : 'flex';
    }

    function handleEnter(e) { if (e.key === 'Enter') sendMessage(); }

    async function sendMessage() {
        const input = document.getElementById('chatInput');
        const text = input.value.trim();
        
        if (!text) return;
        if (!API_KEY || API_KEY.includes('...')) {
            alert("Falta configurar l'API Key al codi!");
            return;
        }

        // 1. Mostrem missatge usuari
        addMsg(text, 'user');
        input.value = '';

        // 2. Mostrem "Escriu..."
        const loadingId = addLoading();

        try {
            // 3. CRIDA REAL A OPENAI (CHATGPT)
            const response = await fetch("https://api.openai.com/v1/chat/completions", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                    "Authorization": `Bearer ${API_KEY}`
                },
                body: JSON.stringify({
                    model: "gpt-3.5-turbo",
                    messages: [
                        { role: "system", content: SYSTEM_PROMPT },
                        { role: "user", content: text }
                    ],
                    max_tokens: 150,
                    temperature: 0.7
                })
            });

            const data = await response.json();
            
            // 4. Processem resposta
            removeLoading(loadingId);
            
            if (data.error) {
                console.error(data.error);
                addMsg("Ho sento, he tingut un problema tècnic (Error API).", 'bot');
            } else {
                const reply = data.choices[0].message.content;
                addMsg(reply, 'bot');
            }

        } catch (error) {
            removeLoading(loadingId);
            console.error(error);
            addMsg("Error de connexió. Revisa la teva internet o la clau API.", 'bot');
        }
    }

    // --- FUNCIONS VISUALS ---
    function addMsg(text, type) {
        const div = document.createElement('div');
        div.className = `chat-msg ${type}`; // Utilitza les classes CSS definides anteriorment
        div.innerText = text;
        const container = document.getElementById('chatMessages') || document.getElementById('chatBody'); // Compatibilitat amb diferents IDs
        if(container) {
            container.appendChild(div);
            container.scrollTop = container.scrollHeight;
        }
    }

    function addLoading() {
        const id = 'load-' + Date.now();
        const div = document.createElement('div');
        div.id = id;
        div.className = 'chat-msg bot'; // Estil de missatge del bot
        div.innerText = '...';
        const container = document.getElementById('chatMessages') || document.getElementById('chatBody');
        if(container) container.appendChild(div);
        return id;
    }

    function removeLoading(id) {
        const el = document.getElementById(id);
        if(el) el.remove();
    }

    // --- JS PER ALS FAQs (Opcional, si ho necessites) ---
    function toggleFaq(element) {
        element.classList.toggle('active');
    }
</script>

    <a href="index.html" style="
    position: fixed; 
    bottom: 30px; 
    left: 30px; 
    z-index: 10000; 
    background: #111; 
    border: 1px solid #333; 
    padding: 12px 25px; 
    border-radius: 50px; 
    text-decoration: none; 
    color: #fff; 
    font-weight: bold; 
    font-family: sans-serif; 
    font-size: 0.8rem; 
    box-shadow: 0 5px 20px rgba(255, 0, 85, 0.4); 
    transition: 0.3s;
    display: flex; 
    align-items: center; 
    gap: 8px;">
    <span class="material-icons" style="font-size:18px;">swap_horiz</span> 
    SWICH
</a>

</body>
</html>